set(processes sqme_aaaa sqme_aazz sqme_aaww)
foreach(_proc ${processes})
  add_custom_command(OUTPUT ${CMAKE_CURRENT_SOURCE_DIR}/${_proc}/lib${_proc}.so COMMAND make WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${_proc})
  add_custom_command(OUTPUT ${CMAKE_CURRENT_SOURCE_DIR}/${_proc}/${_proc}.a COMMAND make WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${_proc})
endforeach()
message(STATUS ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaaa/sqme_aaaa.a)
add_library(comphep SHARED comphep_wraper.cpp ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaaa/sqme_aaaa.a ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaww/sqme_aaww.a ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aazz/sqme_aazz.a)
#target_link_libraries(comphep ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaaa/libsqme_aaaa.so ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaww/libsqme_aaww.so ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aazz/libsqme_aazz.so)
#target_link_libraries(comphep ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaaa/sqme_aaaa.a ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aaww/sqme_aaww.a ${CMAKE_CURRENT_SOURCE_DIR}/sqme_aazz/sqme_aazz.a)
#set(GCC_COVERAGE_LINK_FLAGS "-lsqme_aaaa -lsqme_aazz -lsqme_aaww")
#set_target_properties(comphep PROPERTIES LINKER_LANGUAGE CXX POSITION_INDEPENDENT_CODE ON)
